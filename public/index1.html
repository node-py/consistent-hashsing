<!DOCTYPE html>
<html>
<head>
  <title>D3 Tutorial</title>
  <script src="https://d3js.org/d3.v3.js"></script>
</head>
<body>

  <svg width="600" height="500"></svg>
  <script type="text/javascript">

  var url = "http://localhost:8080/data?nodes=20&items=1000";
  httpGetAsync(url, processData);

  function httpGetAsync(theUrl, callback)
  {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", theUrl, true);
    xmlHttp.setRequestHeader( 'Content-type', 'application/json');
    xmlHttp.send();
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
    }
  }

  function processData(res){
    var obj = JSON.parse(res);
    var data_values = obj['data_values'];
    console.log(data_values);

    draw();
  }

  function draw(){
    var svg = d3.select("svg"), margin = 200,
        width = svg.attr("width") - margin,
        height = svg.attr("height") - margin;

    var xScale = d3.scaleBand().range([0, width]).padding(0.4),
        yScale = d3.scaleLinear().range([height, 0]);

    var g = svg.append("g")
                .attr("transform", "translate(" + 100 + "," + 100 + ")");
  }

  </script>

</body>
</html>
